{{- /* Load Mermaid only on pages that have mermaid diagrams */ -}}
{{- if or (.Page.Scratch.Get "hasMermaid") (.Page.Scratch.Get "usesMermaid") -}}
<script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
  (function() {
    const isDark = document.documentElement.classList.contains('dark') ||
                   (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches);
    mermaid.initialize({
      startOnLoad: true,
      theme: isDark ? 'dark' : 'default'
    });
  })();
</script>
{{- end -}}

{{- /* PDF.js is loaded via iframe src, no additional script needed */ -}}
{{- /* The 9MB pdfjs folder in static/ is only accessed when PDF shortcode is used */ -}}
