{{ if eq .Section "topics" }}
<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}"{{- if (eq .Site.Params.mode "dark") -}} class="dark"{{ end }}>
{{ partial "header.html" . }}

<body data-pagefind-body>
  <div class="container wrapper">
    {{ partial "head.html" . }}

    <article class="topics-index" id="main-content">
      <header class="topics-header">
        <h1>{{ .Title }}</h1>
        {{ with .Params.description }}
        <p class="topics-description">{{ . }}</p>
        {{ end }}
      </header>
      <div class="topics-content">{{ .Content }}</div>
    </article>
  </div>
  {{ partial "footer.html" . }}

  <style>
  .topics-index { max-width: 900px; margin: 0 auto; padding: 1rem; }
  .topics-header { text-align: center; margin-bottom: 2rem; border-bottom: 1px solid var(--color-border, #e1e5e9); padding-bottom: 1.5rem; }
  .topics-header h1 { font-size: 2.5rem; margin-bottom: 1rem; color: var(--color-primary, #333); }
  .topics-description { font-size: 1.2rem; color: var(--color-text-secondary, #666); line-height: 1.6; max-width: 600px; margin: 0 auto; }
  .topics-content { line-height: 1.7; }
  .topics-content h2 { margin-top: 2rem; margin-bottom: 1rem; color: var(--color-primary, #333); border-bottom: 2px solid var(--color-accent, #007acc); padding-bottom: .5rem; }
  .topics-content h3 { margin-top: 1.5rem; margin-bottom: .75rem; }
  .topic-card { border: 1px solid var(--color-border, #e1e5e9); border-radius: 10px; padding: 1.25rem; margin: 1.25rem 0; transition: transform .2s, box-shadow .2s, border-color .2s; display: flex; flex-direction: column; }
  .topic-card:hover { transform: translateY(-4px); box-shadow: 0 8px 25px rgba(0,0,0,.1); border-color: var(--color-accent, #007acc); }
  .topic-card-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
  .topic-icon { font-size: 2rem; flex-shrink: 0; }
  .topic-card-title { margin: 0; flex-grow: 1; }
  .topic-card-title a { color: var(--color-primary, #333); text-decoration: none; font-weight: 600; font-size: 1.5rem; }
  .topic-card-title a:hover { color: var(--color-accent, #007acc); }
  .topic-card-description { color: var(--color-text-secondary, #666); line-height: 1.6; margin: 0 0 1rem 0; flex-grow: 1; }
  .topic-card-tags { display: flex; gap: .5rem; flex-wrap: wrap; margin-bottom: 1rem; }
  .topic-tag { background: var(--color-accent-light, #e3f2fd); color: var(--color-accent, #007acc); padding: .25rem .75rem; border-radius: 20px; font-size: .875rem; font-weight: 500; }
  .topic-card-footer { margin-top: auto; }
  .topic-card-link { display: inline-flex; align-items: center; color: var(--color-accent, #007acc); text-decoration: none; font-weight: 600; padding: .75rem 1.5rem; border: 2px solid var(--color-accent, #007acc); border-radius: 8px; transition: all .3s; }
  .topic-card-link:hover { background: var(--color-accent, #007acc); color: #fff; }
  @media (prefers-color-scheme: dark) { .topics-index { --color-primary:#f0f0f0; --color-text-secondary:#b0b0b0; --color-bg-secondary:#2a2a2a; --color-border:#404040; --color-accent:#4dabf7; --color-accent-light:#1a365d; } }
  @media (max-width: 768px) { .topics-index { padding:.5rem } .topics-header h1 { font-size:2rem } .topics-description { font-size:1rem } .topic-card { padding:1rem; margin:1rem 0 } .topic-card-header { flex-direction:column; align-items:flex-start; gap:.5rem } .topic-icon { font-size:1.5rem } .topic-card-title a { font-size:1.25rem } }
  </style>

</body>

</html>
{{ else }}
<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}"{{- if (eq .Site.Params.mode "dark") -}} class="dark"{{ end }}>
{{ partial "header.html" . }}

<body data-pagefind-body>
  <div class="container wrapper list">
    {{ partial "head.html" . }}

    {{ if isset .Data "Term" }}
      <h2 id="main-content">{{ .Data.Term }}</h2>
    {{ else }}
      <h2 class="page-title" id="main-content">{{ .Name }}</h2>
    {{ end }}

    <ul class="posts flat">
      {{- range .Data.Pages -}}
      {{- if (in (.Site.Params.excludedTypes | default (slice "page")) .Type) -}}
      {{- else -}}
      <li class="post">
        <div class="post-header">
          <div class="meta">
            <div class="date">
              <span class="day">{{ dateFormat "02" .Date }}</span>
              <span class="rest">{{ if $.Site.Data.month }}{{ index $.Site.Data.month (printf "%d" .Date.Month) }} {{ .Date.Year }}{{ else }}{{ dateFormat "Jan 2006" .Date }}{{ end }}</span>
            </div>
          </div>
          <div class="matter">
            <h4 class="title small">
              <a href="{{ .RelPermalink }}">{{.Title}}{{ if .Draft }}<sup class="draft-label">DRAFT</sup>{{ end }}</a>
            </h4>
            <span class="description">
              {{ if isset .Params "description" }}
                {{ .Description }}
              {{ else if gt (len .RawContent) 120 }}
                {{ slicestr .RawContent 0 120 }}...
              {{ else }}
                {{ .RawContent }}
              {{ end }}
            </span>
          </div>
        </div>
      </li>
      {{- end -}}
      {{- end -}}
    </ul>
  </div>

  {{ partial "footer.html" . }}
</body>

</html>
{{ end }}
