<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}" data-theme-mode="{{ .Site.Params.mode | default "auto" }}"{{- if (eq .Site.Params.mode "dark") -}} class="dark"{{ end }}>
{{ partial "header.html" . }}

<body data-pagefind-body>


	{{- /* WCAG 2.2 Level A: Skip link for keyboard navigation */ -}}
	<a href="#main-content" class="skip-link">Skip to main content</a>

{{ $tocSetting := default "both" .Site.Params.toc }}
{{ if and (gt .WordCount 400 ) (or (eq $tocSetting "floating") (eq $tocSetting "both") )}}
	<div class="container-wide wrapper">
		<header class="site-header">
			{{ partial "head.html" . }}
		</header>


		<main role="main" aria-label="Main content" id="main-content">
			{{ partial "content_floating_toc.html" . }}
		</main>
	</div>
	{{ else }}
	<div class="container wrapper">
		<header class="site-header">
			{{ partial "head.html" . }}
		</header>


		<main role="main" aria-label="Main content" id="main-content">
			{{ partial "content_static.html" . }}
		</main>
	</div>
	{{ end }}

	<footer class="site-footer">
		{{ partial "footer.html" . }}
	</footer>
	{{ if and (gt .WordCount 400 ) (or (eq .Site.Params.toc "floating") (eq .Site.Params.toc "both") )}}
	{{ partial "toc_script.html" . }}
	{{ end }}
	{{- /* Load conditional scripts (Mermaid, PDF.js) only when needed */ -}}
	{{ partial "conditional-scripts.html" . }}

	{{- /* Prefetch related articles for instant navigation */ -}}
	{{ partial "prefetch_links.html" . }}
</body>

</html>
